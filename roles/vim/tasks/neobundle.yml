---
- name: create ~/.vim/bundle
  file: >
    state=directory
    recurse=yes
    path=~/.vim/bundle

- name: git clone neobundle
  git: >
    repo=https://github.com/Shougo/neobundle.vim.git
    dest=~/.vim/bundle/neobundle.vim

- name: install neobundle-cmd
  gem: name={{item}} state=present
  with_items:
    - neobundle

- name: bundle clean
  command: neobundle clean
  register: result
  changed_when: result.rc == 0
  failed_when: result.rc == 1

- name: bundle install
  command: neobundle install
  register: result
  changed_when: result.rc == 0
  failed_when: result.rc == 1
